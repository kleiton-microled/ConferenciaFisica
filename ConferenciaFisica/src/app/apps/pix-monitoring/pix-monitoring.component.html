<app-page-title [breadcrumbItems]="pageTitle" title=""></app-page-title>
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-lg-12 d-flex align-items-center">
                        <h4 style="font-weight: 100">Monitoramento Pix ITAU</h4>
                        2<!--<button class="btn btn-link p-0 ms-3 custom-btn" (click)="openModal(advancedFilterModal)">
                            <strong><i class="fas fa-filter"></i> Filtrar por data</strong>
                        </button>-->
                    </div>
                </div>
                <!--Counts for pix-->
                <app-count-pix-cards [cards]="pixCounts"></app-count-pix-cards>

                <!--Table for pix status-->
                <app-advanced-table #advancedTable 
                                    (handleTableLoad)="handleTableLoad($event)" 
                                    [tableData]="paymentsList"
                                    [columns]="columns" 
                                    [pagination]="false" 
                                    [hasRowSelection]="false" 
                                    [isSearchable]="false"
                                    (rowSelected)="onRowSelected($event)" 
                                    (search)="''" 
                                    [isSortable]="false"
                                    tableClasses="table-centered" 
                                    theadClasses="table-light" 
                                    [singleRowSelection]="true">
                </app-advanced-table>

                <!-- Controles de paginação personalizados -->
                <div class="d-flex flex-wrap justify-content-between align-items-center mt-3">
                    <div class="d-flex align-items-center">
                        <span class="me-2">Mostrando {{ (currentPage - 1) * pageSize + 1 }} a {{ Math.min(currentPage * pageSize, totalItems) }} de {{ totalItems }} registros</span>
                        
                        <select class="form-select form-select-sm ms-2" style="width: auto;" 
                                [(ngModel)]="pageSize" (change)="changePageSize(pageSize)">
                            <option [value]="10">10</option>
                            <option [value]="25">25</option>
                            <option [value]="50">50</option>
                            <option [value]="100">100</option>
                        </select>
                        <span class="ms-2">por página</span>
                    </div>

                    <nav aria-label="Navegação de páginas">
                        <ul class="pagination pagination-rounded mb-0">
                            <li class="page-item" [class.disabled]="!hasPreviousPage">
                                <a class="page-link" href="javascript:void(0);" (click)="previousPage()" 
                                   [class.disabled]="!hasPreviousPage">
                                    <i class="mdi mdi-chevron-left"></i>
                                </a>
                            </li>
                            
                            <!-- Páginas numeradas -->
                            <li class="page-item" *ngFor="let page of getPageNumbers()" 
                                [class.active]="page === currentPage">
                                <a class="page-link" href="javascript:void(0);" (click)="goToPage(page)">
                                    {{ page }}
                                </a>
                            </li>
                            
                            <li class="page-item" [class.disabled]="!hasNextPage">
                                <a class="page-link" href="javascript:void(0);" (click)="nextPage()" 
                                   [class.disabled]="!hasNextPage">
                                    <i class="mdi mdi-chevron-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Template da modal -->
<ng-template #advancedFilterModal let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Filtrar por data</h5>
        <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <form>

        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">
            Fechar
        </button>
        <button type="button" class="btn btn-primary" (click)="advancedFilter()">
            Aplicar Filtro
        </button>
    </div>
</ng-template>